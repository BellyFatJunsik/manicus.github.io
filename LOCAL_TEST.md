# 로컬 메일 전송 테스트 가이드

## 로컬 테스트 방법

### 1단계: 백엔드 서버 실행

**터미널 1:**

```bash
# 백엔드 폴더로 이동
cd backend

# 의존성 설치 (처음 한 번만)
npm install

# 환경 변수 확인/설정
# .env 파일이 이미 있으면 확인만 하면 됩니다
cat .env

# 서버 실행
npm start

# 또는 개발 모드 (파일 변경 시 자동 재시작)
npm run dev
```

**서버가 정상 실행되면:**
```
서버가 포트 3001에서 실행 중입니다.
```

### 2단계: 프론트엔드 실행

**터미널 2 (새 터미널):**

```bash
# 루트 폴더에서
npm install  # 처음 한 번만

# 개발 서버 실행
npm run dev
```

**프론트엔드가 정상 실행되면:**
```
VITE v7.x.x  ready in xxx ms

➜  Local:   http://localhost:5173/
```

### 3단계: 테스트

1. 브라우저에서 `http://localhost:5173` 접속
2. "상담 문의" 버튼 클릭
3. 폼 작성:
   - 회사명: 테스트 회사
   - 이름: 테스트
   - 휴대폰번호: 010-1234-5678
   - 이메일주소: test@example.com
   - 문의내용: 로컬 테스트
4. "제출하기" 클릭
5. 확인:
   - 백엔드 서버 콘솔에서 로그 확인
   - `contact@manicus.co.kr`로 이메일 수신 확인

## 환경 변수 설정

### backend/.env 파일

```env
GMAIL_USER=gfccjs80@gmail.com
GMAIL_APP_PASSWORD=ntiydmjbjyezzzdf
RECEIVE_EMAIL=contact@manicus.co.kr
PORT=3001
```

**참고**: `.env` 파일이 이미 존재하고 기본값이 코드에 포함되어 있어서, 환경 변수를 설정하지 않아도 작동합니다.

## 로컬 개발 시 API URL

프론트엔드는 자동으로 다음을 사용합니다:
- **개발 모드** (`npm run dev`): `http://localhost:3001/api/send-email` (백엔드 서버)
- **프로덕션** (Vercel 배포): `/api/send-email` (Vercel 서버리스 함수)

## 빠른 테스트 명령어

```bash
# 터미널 1: 백엔드 서버
cd backend && npm start

# 터미널 2: 프론트엔드
npm run dev
```

## 문제 해결

### 백엔드 서버가 시작되지 않음
- 포트 3001이 이미 사용 중인지 확인: `lsof -i :3001`
- `.env` 파일이 올바르게 설정되었는지 확인
- `npm install`이 완료되었는지 확인

### 이메일 전송 실패
- Gmail 앱 비밀번호가 올바른지 확인
- Gmail 2단계 인증이 활성화되어 있는지 확인
- 백엔드 서버 콘솔의 에러 메시지 확인

### CORS 오류
- 백엔드 서버가 실행 중인지 확인
- 프론트엔드가 올바른 포트에서 실행 중인지 확인
- 브라우저 콘솔에서 정확한 에러 메시지 확인

### API 연결 실패
- 백엔드 서버가 `http://localhost:3001`에서 실행 중인지 확인
- 프론트엔드가 개발 모드(`npm run dev`)로 실행 중인지 확인
- 브라우저 개발자 도구 → Network 탭에서 요청 확인

## 테스트 확인 사항

✅ 백엔드 서버가 포트 3001에서 실행 중
✅ 프론트엔드가 개발 서버에서 실행 중
✅ 브라우저에서 "상담 문의" 폼 접근 가능
✅ 폼 제출 시 백엔드 서버 콘솔에 로그 출력
✅ 이메일이 `contact@manicus.co.kr`로 전송됨

## 현재 설정 상태

- ✅ 백엔드 서버: `backend/server.js` 준비됨
- ✅ 환경 변수: 기본값이 코드에 포함되어 있음
- ✅ 프론트엔드: 로컬 개발 시 자동으로 백엔드 서버 사용
- ✅ CORS: 백엔드 서버에 설정되어 있음

**결론**: 바로 테스트할 수 있습니다! 두 터미널에서 서버를 실행하면 됩니다.
